import React from 'react';
import { useThemeValue } from '@gravity-ui/uikit';
import { shapeYagrConfig } from './utils';
export const useWidgetData = (props, id) => {
    const { data, sources, libraryConfig } = props.data;
    const theme = useThemeValue();
    const config = React.useMemo(() => shapeYagrConfig({
        data,
        libraryConfig,
        theme,
        customTooltip: Boolean(props.tooltip),
    }), [data, libraryConfig, theme, props.tooltip]);
    const debug = React.useMemo(() => {
        const filename = sources
            ? Object.values(sources)
                .map((source) => {
                var _a;
                return (_a = source === null || source === void 0 ? void 0 : source.data) === null || _a === void 0 ? void 0 : _a.program;
            })
                .filter(Boolean)
                .join(', ') || id
            : id;
        return { filename };
    }, [id, sources]);
    return { config, debug };
};
